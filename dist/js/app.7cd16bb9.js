(function(){"use strict";var e={1143:function(e,t,s){var n=s(9242),o=s(3396);function a(e,t,s,n,a,l){const i=(0,o.up)("MistralChat");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(i)])}var l=s(7139);const i={class:"chat-mistral"},r=(0,o._)("h1",{class:"title"},"Chat",-1),c={class:"data"},u=(0,o._)("label",{class:"apikeylabel",for:"apiKey"},"API Key:",-1),d={class:"models"},p=(0,o._)("label",{class:"modellabel",for:"modelSelect"},"Model:",-1),m=(0,o._)("option",{disabled:"",value:""},"Model",-1),h=(0,o._)("option",{value:"mistral-tiny"},"Mistral Tiny",-1),f=(0,o._)("option",{value:"mistral-small"},"Mistral Small",-1),g=(0,o._)("option",{value:"mistral-medium"},"Mistral Medium",-1),y=[m,h,f,g],v={class:"chat-area"},b={key:0,class:"icon"},M={key:1,class:"icon"},_=["innerHTML"],w={key:0,class:"loading"},S={class:"questioncontainer"},K=(0,o._)("button",{class:"submitbutton",type:"submit"},"Send",-1);function T(e,t,s,a,m,h){return(0,o.wg)(),(0,o.iD)("div",i,[r,(0,o._)("form",{class:"form",onSubmit:t[4]||(t[4]=(0,n.iM)(((...e)=>h.sendQuestion&&h.sendQuestion(...e)),["prevent"]))},[(0,o._)("div",c,[u,(0,o.wy)((0,o._)("input",{class:"apikeyinput",type:"text",id:"apiKey","onUpdate:modelValue":t[0]||(t[0]=e=>m.apiKey=e)},null,512),[[n.nr,m.apiKey]])]),(0,o._)("div",d,[p,(0,o.wy)((0,o._)("select",{class:"modelselect",id:"modelSelect","onUpdate:modelValue":t[1]||(t[1]=e=>m.selectedModel=e)},y,512),[[n.bM,m.selectedModel]])]),(0,o._)("div",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.messages,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:(0,l.C_)(["message",{user:"user"===e.role,assistant:"assistant"===e.role}])},["user"===e.role?((0,o.wg)(),(0,o.iD)("span",b,"ðŸ‘¤")):(0,o.kq)("",!0),"assistant"===e.role?((0,o.wg)(),(0,o.iD)("span",M,"ðŸ’»")):(0,o.kq)("",!0),(0,o._)("div",{class:"messagecontent",innerHTML:e.content},null,8,_)],2)))),128)),m.loading?((0,o.wg)(),(0,o.iD)("div",w,"...")):(0,o.kq)("",!0)]),(0,o._)("div",S,[(0,o.wy)((0,o._)("textarea",{id:"question","onUpdate:modelValue":t[2]||(t[2]=e=>m.userQuestion=e),onKeydown:t[3]||(t[3]=(...e)=>h.handleTextareaKeydown&&h.handleTextareaKeydown(...e))},null,544),[[n.nr,m.userQuestion]]),K])],32)])}s(560);var k=s(1076),O={name:"MistralChat",data(){return{apiKey:"",selectedModel:"",userQuestion:"",response:null,loading:!1,messages:[]}},mounted(){this.apiKey=localStorage.getItem("apiKey")||"",this.selectedModel=localStorage.getItem("selectedModel")||"";const e=localStorage.getItem("messages");e&&(this.messages=JSON.parse(e)),this.scrollToBottom()},watch:{apiKey(e){localStorage.setItem("apiKey",e)},selectedModel(e){localStorage.setItem("selectedModel",e)},messages:{handler(e){localStorage.setItem("messages",JSON.stringify(e)),this.scrollToBottom()},deep:!0,immediate:!0}},methods:{scrollToBottom(){this.$nextTick((()=>{const e=this.$el.querySelector(".chat-area");e&&(e.scrollTop=e.scrollHeight)}))},escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},handleTextareaKeydown(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendQuestion())},sendQuestion(){this.loading=!0,this.response=null;const e=this.userQuestion;this.userQuestion="",this.messages.push({role:"user",content:e}),k.Z.post("https://api.mistral.ai/v1/chat/completions",{model:this.selectedModel,messages:[{role:"user",content:e}]},{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.apiKey}`}}).then((e=>{if(e.data.choices&&e.data.choices.length>0){let t=e.data.choices[0].message.content;this.messages.push({role:"assistant",content:this.formatCodeResponse(t)})}else this.messages.push({role:"assistant",content:"Pas de rÃ©ponse de l'API."});this.scrollToBottom()})).catch((e=>{console.error("Erreur API: ",e),this.messages.push({role:"assistant",content:"Erreur lors de la connexion Ã  l'API Mistral."})})).finally((()=>{this.loading=!1}))},formatCodeResponse(e){let t=this.escapeHtml(e);if(t.includes("```")){const e=t.split("```");let s="";for(let t=0;t<e.length;t++)s+=(t%2===1?"<pre><code>":"")+e[t]+(t%2===1?"</code></pre>":"");return s}return t}}},x=s(89);const j=(0,x.Z)(O,[["render",T]]);var C=j,I={name:"App",components:{MistralChat:C}};const P=(0,x.Z)(I,[["render",a]]);var Q=P;(0,n.ri)(Q).mount("#app")}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,n,o,a){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],a=e[u][2];for(var i=!0,r=0;r<n.length;r++)(!1&a||l>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[r])}))?n.splice(r--,1):(i=!1,a<l&&(l=a));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,l=n[0],i=n[1],r=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(r)var u=r(s)}for(t&&t(n);c<l.length;c++)a=l[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=self["webpackChunkmistral_chat"]=self["webpackChunkmistral_chat"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(1143)}));n=s.O(n)})();
//# sourceMappingURL=app.7cd16bb9.js.map